# 物件監視通知システム要件定義

## 概要

- Kotlin を使用して、SUUMO サイトから物件情報を定期的に取得し、条件に合致する新着物件を LINE API を通じて通知するシステム
- バッチ処理として実装し、検索条件は JSON 形式で指定可能とする

## 機能要件

### 1. データ取得機能

- SUUMO ウェブサイトから物件情報をスクレイピング
- 対象 URL: https://suumo.jp/jj/chintai/ichiran/FR301FC001/ などの検索結果ページ
- 取得する情報:
  - 物件名
  - 住所
  - 最寄り駅・徒歩時間
  - 賃料・管理費
  - 敷金・礼金
  - 間取り・専有面積
  - 築年数
  - URL

### 2. 検索条件指定機能

- JSON 形式で検索条件を指定可能
- 指定可能なパラメータ:
  - エリア（都道府県、市区町村）
  - 賃料範囲（下限・上限）
  - 間取り
  - 駅徒歩（分）
  - 築年数
  - その他条件（駐車場あり、ペット可など）

### 3. データ管理機能

- 過去に通知した物件情報を保存
- 新着物件のみを識別して通知

### 4. 通知機能

- LINE Messaging API を使用してユーザーに通知
- 通知内容:
  - 物件の基本情報
  - 物件詳細ページの URL

### 5. スケジュール実行機能

- 定期的に（例: 1 日 1 回）バッチ処理を実行
- 設定可能な実行間隔

## 技術要件

### 開発言語・フレームワーク

- Kotlin
- Kotlin Coroutines（非同期処理）
- Ktor（HTTP クライアント）
- jsoup（HTML パース）
- kotlinx.serialization（JSON 処理）

### 外部 API

- LINE Messaging API

### データ保存

- ローカルファイル（JSON 形式）または軽量データベース

## 制約条件

- SUUMO サイトの利用規約に準拠したアクセス頻度とする
- User-Agent を適切に設定し、人間のブラウザからのアクセスと同様に振る舞う
- エラーハンドリングを適切に実装し、安定した動作を確保する

## 将来拡張可能性

- 複数のサイト（例：ホームズ、アットホームなど）からのデータ取得
- より詳細な検索条件の追加
- WebUI による設定画面の提供
- メール通知オプションの追加

## 成功基準

- 指定した検索条件に合致する新着物件を漏れなく通知できること
- 同じ物件の重複通知がないこと
- 1 日 1 回以上の定期実行が安定して行えること
- LINE 通知が適切なフォーマットで届くこと
